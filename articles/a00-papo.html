<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dv.papo">
<title>Patient Profile Module • dv.papo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Patient Profile Module">
<meta property="og:description" content="dv.papo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dv.papo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a00-papo.html">Patient Profile Module</a>
    <a class="dropdown-item" href="../articles/a01-data_requirements.html">Data requirements</a>
    <a class="dropdown-item" href="../articles/a02-communication.html">Communication with other DaVinci modules</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/qc.html">Quality Control</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="a00-papo_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Patient Profile Module</h1>
            
      
      
      <div class="d-none name"><code>a00-papo.Rmd</code></div>
    </div>

    
    
<p>This guide will help you configure the Patient Profile module for inclusion in DaVinci apps.</p>
<div class="section level2">
<h2 id="what-does-the-patient-profile-module-do">What does the Patient Profile module do?<a class="anchor" aria-label="anchor" href="#what-does-the-patient-profile-module-do"></a>
</h2>
<p>The DaVinci Patient Profile module displays patient information on a subject-level basis. It is divided into three sections: summary, listings, and plots.</p>
<ul>
<li>Summary: Snapshot of the patient’s demographic information that doesn’t change with visits.</li>
<li>Listings: Information that changes with each visit.</li>
<li>Plots: Visual depictions of events over time, such as adverse events or concomitant medication, and point-like events like lab values or vital sign measurements.</li>
</ul>
<p>The following screenshot shows the module configured to display the popular sample <code>safetyData</code> dataset. Notice the three sections under the titles “Patient Information”, “Data Listings” and “Graphical Display”:</p>
<!-- 
The following image has been generated using this bookmark:
- function to run: explorer_app(datasets = dv.papo:::prep_safety_data())
- url to restore: http://127.0.0.1:4127/?_inputs_&plots-value_plots-1-vars-analysis_date=%22ADT%22&plots-value_plots-1-vars-analysis_val=%22AVAL%22&plots-value_plots-1-vars-analysis_param=%22PARAM%22&plots-value_plots-1-dataset=%22lb%22&plots-range_plots-2-tooltip-2=%22AENDY%22&plots-range_plots-2-tooltip-1=%22ASTDY%22&plots-range_plots-2-vars-serious_ae=%22AESER%22&plots-range_plots-2-vars-grading=%22AESEV%22&plots-range_plots-2-vars-decode=%22AEDECOD%22&plots-range_plots-2-vars-end_date=%22AENDT%22&plots-range_plots-2-vars-start_date=%22ASTDT%22&plots-range_plots-2-dataset=%22adae%22&plots-range_plots-1-vars-grading=%22CMDECOD%22&plots-range_plots-1-vars-decode=%22CMDECOD%22&plots-range_plots-1-vars-end_date=%22CMENDT%22&plots-range_plots-1-vars-start_date=%22CMSTDT%22&plots-range_plots-1-dataset=%22cm%22&plots-timeline_info-trt_end_date=%22TRTEDT%22&plots-timeline_info-trt_start_date=%22TRTSDT%22&listings-2-default_vars=%5B%22ASTDT%22%2C%22ASTDY%22%2C%22AENDT%22%2C%22AENDY%22%2C%22AEDECOD%22%2C%22AESEV%22%5D&listings-2-dataset=%22adae%22&listings-1-dataset=%22cm%22&summary-vars=%5B%22SUBJID%22%2C%22SITEID%22%2C%22ARM%22%2C%22TRTSDT%22%2C%22TRTEDT%22%2C%22AGE%22%2C%22RACE%22%2C%22SEX%22%2C%22BMIBL%22%5D&module_id=%22papo%22&plots-enabled=true&listings-enabled=true&summary-enabled=true&subjid_var=%22USUBJID%22&subject_level_dataset_name=%22adsl%22&manual_code=%22%22&edit_code=false&spec=%22dv.papo%3A%3Amod_patient_profile%22&listings-1=true&listings=false&summary=true&plots-vline_vars-1=%22RFICDT%22&plots-value_plots-1-vars-range_high_limit=%22A1HI%22&plots-value_plots-1-vars-range_low_limit=%22A1LO%22&plots-value_plots-1-vars-analysis_indicator=%22LBNRIND%22&plots-range_plots=true&plots-timeline_info-part_end_date-enabled=false&plots-timeline_info-icf_date-enabled=false&plots-timeline_info=true&plots=true&listings-2-default_vars-enabled=true&listings-2=true&listings-1-default_vars-enabled=false&plots-range_plots-2-tooltip=true&plots-range_plots-2-vars-serious_ae-enabled=true&plots-range_plots-2-vars-grading-enabled=true&plots-range_plots-2-vars=true&plots-range_plots-2=true&plots-range_plots-1-tooltip=true&plots-range_plots-1-vars-serious_ae-enabled=false&plots-range_plots-1-vars-grading-enabled=true&plots-range_plots-1-vars=true&plots-range_plots-1=true&summary-column_count=3&plots-palette-enabled=false&plots-vline_day_numbers-enabled=false&plots-vline_vars=true&plots-value_plots-1-tooltip=true&plots-value_plots-1-vars-summary_stats-enabled=false&plots-value_plots-1-vars-range_high_limit-enabled=true&plots-value_plots-1-vars-range_low_limit-enabled=true&plots-value_plots-1-vars-analysis_indicator-enabled=true&plots-value_plots-1-vars=true&plots-value_plots-1=true&plots-value_plots=true&papo-listings-column_selector_adae=%5B%22ASTDT%22%2C%22ASTDY%22%2C%22AENDT%22%2C%22AENDY%22%2C%22AEDECOD%22%2C%22AESEV%22%5D&papo-listings-column_selector_cm=%5B%22CMSTDT%22%2C%22CMENDT%22%5D&papo-plot_contents-LabValues=%22Albumin%20(g%2FL)%22&papo-patient_selector=%2201-711-1036%22&papo-listings-data_selector=%22adae%22&plots-vline_vars-1-name=%22Informed%20Consent%20Date%22&plots-value_plots-1-name=%22Lab%20Values%22&plots-range_plots-2-tooltip-2-name=%22AE%20End%20Day%3A%20%22&plots-range_plots-2-tooltip-1-name=%22AE%20Start%20Day%3A%20%22&plots-range_plots-2-name=%22Adverse%20Events%22&plots-range_plots-1-name=%22Concomitant%20Medication%22&listings-2-name=%22Adverse%20Events%22&listings-1-name=%22Concomitant%20Medication%22&plotly_afterplot-A=%22%5C%22papo-plot_contents-plot%5C%22%22&.clientValue-default-plotlyCrosstalkOpts=%7B%22on%22%3A%22plotly_click%22%2C%22persistent%22%3Afalse%2C%22dynamic%22%3Afalse%2C%22selectize%22%3Afalse%2C%22opacityDim%22%3A0.2%2C%22selected%22%3A%7B%22opacity%22%3A1%7D%2C%22debounce%22%3A0%2C%22color%22%3A%5B%5D%7D&_values_&counts=%7B%22plots-value_plots-1-tooltip%22%3A0%2C%22listings%22%3A2%2C%22plots-vline_vars%22%3A1%2C%22plots-range_plots%22%3A2%2C%22plots-value_plots%22%3A1%2C%22plots-range_plots-1-tooltip%22%3A0%2C%22plots-range_plots-2-tooltip%22%3A2%7D -->
<p><img src="images/complete_display.jpg"></p>
<p>The next section breaks down the necessary configuration steps to set up this display.</p>
<p>The final section shows the resulting configuration.</p>
</div>
<div class="section level2">
<h2 id="how-to-configure-the-patient-profile-module">How to configure the Patient Profile module?<a class="anchor" aria-label="anchor" href="#how-to-configure-the-patient-profile-module"></a>
</h2>
<p>The <code>mod_patient_profile</code> function takes several arguments, some of which are optional:</p>
<ul>
<li><p><code>module_id</code>: This is a unique identifier for the Shiny module in your DaVinci app.</p></li>
<li><p><code>subject_level_dataset_name</code>, <code>subjid_var</code>: These are the subject-level dataset name and unique subject identifier column respectively.</p></li>
<li><p><code>sender_ids</code>: This optional parameter identifies modules that can request the display of target patient IDs. You can read more about it in the dedicated “Module Communication” article.</p></li>
<li><p><code>summary</code>, <code>listings</code>, <code>plots</code>: These optional parameters allow you to customize what information is displayed in each of the three section. Let’s take a look at each of them separately.</p></li>
</ul>
<div class="section level3">
<h3 id="incremental-configuration">Incremental configuration<a class="anchor" aria-label="anchor" href="#incremental-configuration"></a>
</h3>
<p>As will become apparent, some of these parameters have fields, and some of those fields have subfields. <strong>The complexity of this interface reflects its flexibility, but it can prove overwhelming</strong>. To alleviate this situation, we’ve made sure that <strong>this module is functional when partially configured and provides clear and helpful error messages when accidentally misconfigured</strong>.</p>
<p>When a DaVinci application containing a misconfigured <code>mod_patient_profile</code> starts it presents descriptive instructions on how to address the problem. Here’s a screenshot showing three such help messages: <img src="images/sample_error.jpg" style="border:1px solid lightgray;border-radius:4px"> If no error is displayed on application start, the blame for any unexpected problems the users encounter should fall on the authors of this module or the infrastructure providers.</p>
<p>This forgiving behavior makes it possible to start with a minimal empty call to <code><a href="../reference/mod_patient_profile.html">dv.papo::mod_patient_profile()</a></code> and parameterize it incrementally until a satisfactory configuration is reached.</p>
</div>
<div class="section level3">
<h3 id="the-summary-parameter">The <code>summary</code> parameter<a class="anchor" aria-label="anchor" href="#the-summary-parameter"></a>
</h3>
<p>The <code>summary</code> parameter is a list that allows to customize the subject-level summary section. It is composed of:</p>
<ul>
<li>
<code>vars</code>: These are the values you want to display in the this section. They index into the dataset specified by <code>subject_level_dataset_name</code>.</li>
<li>
<code>column_count</code>: This is the number of columns for the summary section.</li>
</ul>
<p>Recall the summary section of the sample image at the beginning of this article: <img src="images/summary.jpg" style="border:1px solid lightgray;border-radius:4px"></p>
<p>The parameterization that generates that section is:</p>
<pre><code><span><span class="va">summary</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SUBJID"</span>, <span class="st">"SITEID"</span>, <span class="st">"ARM"</span>, </span>
<span>           <span class="st">"TRTSDT"</span>, <span class="st">"TRTEDT"</span>, <span class="st">"AGE"</span>, </span>
<span>           <span class="st">"RACE"</span>,   <span class="st">"SEX"</span>,    <span class="st">"BMIBL"</span><span class="op">)</span>,</span>
<span>  column_count <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre>
<p>We’ve broken the <code>vars</code> field into three lines to highlight the one-to-one mapping between each var and the their counterpart on the image.</p>
<p>The bold-faced descriptions of the variables are extracted from the <code>label</code> column attribute already present in the dataset.</p>
</div>
<div class="section level3">
<h3 id="the-listings-parameter">The <code>listings</code> parameter<a class="anchor" aria-label="anchor" href="#the-listings-parameter"></a>
</h3>
<p>The <code>listings</code> parameter is a named list of elements to include as listings in the “Data Listing” section.</p>
<p>Recall the listings section in the sample image at the beginning of this article: <img src="images/listings.jpg" style="border:1px solid lightgray;border-radius:4px"></p>
<p>The parameterization that generates that section is:</p>
<pre><code><span><span class="va">listings</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Concomitant Medication"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="st">"cm"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"Adverse Events"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="st">"adae"</span>,</span>
<span>    default_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDT"</span>, <span class="st">"ASTDY"</span>, <span class="st">"AENDT"</span>, <span class="st">"AENDY"</span>, <span class="st">"AEDECOD"</span>, <span class="st">"AESEV"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
<p>Notice how the names on the list (<code>"Concomitant Medication"</code> and <code>"Adverse Events"</code>) are used as the labels in the blue “Domain” selector. The mandatory <code>dataset</code> field indicates which domain to display under which heading. The optional <code>default_vars</code> is the initial selection of “Columns” to display on the listing. The user can modify that selection.</p>
<p>The bold-faced listing headings are extracted from the <code>label</code> column attribute already present in the dataset.</p>
</div>
<div class="section level3">
<h3 id="the-plots-parameter">The <code>plots</code> parameter<a class="anchor" aria-label="anchor" href="#the-plots-parameter"></a>
</h3>
<p>The plots parameter is a named list of elements to include as plots in the “Graphical Display” section.</p>
<p>Recall the plots section in the sample image at the beginning of this article: <img src="images/plots.jpg" style="border:1px solid lightgray;border-radius:4px"> The parameterization that generates that section is:</p>
<pre><code><span><span class="va">plots</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    timeline_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>trt_start_date <span class="op">=</span> <span class="st">"TRTSDT"</span>, trt_end_date <span class="op">=</span> <span class="st">"TRTEDT"</span><span class="op">)</span>,</span>
<span>    range_plots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"Concomitant Medication"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        dataset <span class="op">=</span> <span class="st">"cm"</span>,</span>
<span>        vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>start_date <span class="op">=</span> <span class="st">"CMSTDT"</span>, end_date <span class="op">=</span> <span class="st">"CMENDT"</span>, decode <span class="op">=</span> <span class="st">"CMDECOD"</span>, </span>
<span>                 grading <span class="op">=</span> <span class="st">"CMDECOD"</span><span class="op">)</span>,</span>
<span>        tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"Adverse Events"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        dataset <span class="op">=</span> <span class="st">"adae"</span>,</span>
<span>        vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>start_date <span class="op">=</span> <span class="st">"ASTDT"</span>, end_date <span class="op">=</span> <span class="st">"AENDT"</span>, decode <span class="op">=</span> <span class="st">"AEDECOD"</span>, </span>
<span>                 grading <span class="op">=</span> <span class="st">"AESEV"</span>, serious_ae <span class="op">=</span> <span class="st">"AESER"</span><span class="op">)</span>,</span>
<span>        tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AE Start Day: "</span> <span class="op">=</span> <span class="st">"ASTDY"</span>, <span class="st">"AE End Day: "</span> <span class="op">=</span> <span class="st">"AENDY"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    value_plots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"Lab Values"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        dataset <span class="op">=</span> <span class="st">"lb"</span>,</span>
<span>        vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>analysis_param <span class="op">=</span> <span class="st">"PARAM"</span>, analysis_val <span class="op">=</span> <span class="st">"AVAL"</span>, analysis_date <span class="op">=</span> <span class="st">"ADT"</span>, </span>
<span>                 analysis_indicator <span class="op">=</span> <span class="st">"LBNRIND"</span>, range_low_limit <span class="op">=</span> <span class="st">"A1LO"</span>, range_high_limit <span class="op">=</span> <span class="st">"A1HI"</span><span class="op">)</span>,</span>
<span>        tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        default_analysis_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Albumin (g/L)"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    vline_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Informed Consent Date"</span> <span class="op">=</span> <span class="st">"RFICDT"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
<p>As with the two previous sections, there is a clear mapping between the <code>plot</code> fields and their effect on the displayed charts. Here’s a brief summary of those fields:</p>
<ul>
<li>
<code>timeline_info</code> configures the extent of the horizontal time axis.</li>
<li>
<code>range_plots</code> and <code>value_plots</code> describe which plots to include.</li>
<li>
<code>vline_vars</code> and <code>vline_day_numbers</code> (optional and not used in the example) add extra vertical markers that run through all plots.</li>
<li>
<code>palette</code> (optional and not used in the example) is used to fine-tune the color of points, ranges and vertical markers on plots. For Adverse Events and Concomitant Medication plots, if a palette is provided, it’s checked to see if colors are stated for all grading values. If not, then the grading values without colors, are assigned a complementary color. When a palette isn’t provided, colors are automatically assigned to grading values internally.</li>
</ul>
<p>And here’s a more detailed account of their properties:</p>
<div class="section level4">
<h4 id="the-plotstimeline_info-field">The <code>plots/timeline_info</code> field<a class="anchor" aria-label="anchor" href="#the-plotstimeline_info-field"></a>
</h4>
<p>The <code>timeline_info</code> field is a list of date variables in the dataset specified by the <code>subject_level_dataset_name</code> parameter. The two mandatory subfields are:</p>
<ul>
<li>
<code>trt_start_date</code>: Treatment Start Date, used also as Day 1 Reference Date to derive Study Day numbers.</li>
<li>
<code>trt_end_date</code>: Treatment End Date.</li>
</ul>
<p>There are two additional optional subfields:</p>
<ul>
<li>
<code>icf_date</code>: Informed Consent Form signing Date.</li>
<li>
<code>part_end_date</code>: Participation End Date.</li>
</ul>
<p>They usually envelop and extend the treatment start-end time range. Including them expands the horizontal time range of the plots.</p>
</div>
<div class="section level4">
<h4 id="the-plotsrange_plots-field">The <code>plots/range_plots</code> field<a class="anchor" aria-label="anchor" href="#the-plotsrange_plots-field"></a>
</h4>
<p>The <code>range_plots</code> field is a named list of elements to include as plots for range-like events (adverse events, concomitant medications, etc.). Each of them has three members:</p>
<ul>
<li><p><code>dataset</code>: Dataset name from which to pull the information.</p></li>
<li>
<p><code>vars</code>: Variables of interest for the event. They index into <code>dataset</code>:</p>
<ul>
<li>
<code>start_date</code> and <code>end_date</code>: Beginning and end of the range.</li>
<li>
<code>decode</code>: Description of the event.</li>
<li>
<code>grading</code>: Intensity of the event. Used for color-coding ranges.</li>
<li>
<code>serious_ae</code>: Marker of serious adverse event. Overlays a <code>SAE</code> legend on top of events that require special attention.</li>
</ul>
</li>
<li><p><code>tooltip</code>: Defines a block of text to display as hover information over the left edge of each range. It is specified as a named list of <code>dataset</code> variable names. The names of this list are included as literal text and honor three basic HTML formatting elements: <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;br&gt;</code>. The columns the values refer to are populated with the value on the dataset relevant to any given row.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="the-plotsvalue_plots-field">The <code>plots/value_plots</code> field<a class="anchor" aria-label="anchor" href="#the-plotsvalue_plots-field"></a>
</h4>
<p>The <code>value_plots</code> field is a named list of elements to include as plots for value-like traces (lab measurements, vital signs, etc.). Each of them has three mandatory members and one optional member:</p>
<ul>
<li><p><code>dataset</code>: Dataset name from which to pull the information.</p></li>
<li>
<p><code>vars</code>: Variables of interest for the event. Only the first three are mandatory. They index into <code>dataset</code>:</p>
<ul>
<li>
<code>analysis_param</code>: Variable describing the parameter to plot.</li>
<li>
<code>analysis_val</code>: Value associated to each time point.</li>
<li>
<code>analysis_date</code>: Date of sample collection.</li>
<li>
<code>analysis_indicator</code>: Used for color-coding the marker on the plot. Usually indicates whether a value is inside or outside of range.</li>
<li>
<code>range_low_limit</code>: Lower limit of the range considered normal for this particular parameter.</li>
<li>
<code>range_high_limit</code>: Higher limit of the range considered normal for this particular parameter.</li>
<li>
<code>summary_stats</code> : This variable supplements <code>analysis_val</code> and is useful for datasets that have more than one measurement per <code>analysis_date</code>. It should point to a variable that summarizes all measurements on a single visit through a centrality calculation (mean, median, etc.).</li>
</ul>
</li>
<li><p><code>tooltip</code>: Defines a block of text to display as hover information over the left edge of each range. It is specified as a named list of <code>dataset</code> variable names. The names of this list are included as literal text and honor three basic HTML formatting elements: <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;br&gt;</code>. The columns the values refer to are populated with the value on the dataset relevant to any given row.</p></li>
<li><p><code>default_analysis_params</code>: Optional. A vector of character values specifying the default analysis parameters (values from the variable specified by <code>analysis_param</code>) to display.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="the-plotsvline_vars-field">The <code>plots/vline_vars</code> field<a class="anchor" aria-label="anchor" href="#the-plotsvline_vars-field"></a>
</h4>
<p>The <code>vline_vars</code> field places vertical dashed lines on days indicated by this dataset columns. It indexes into the dataset <code>subject_level_dataset_name</code> and expects values of type <code>integer</code>, <code>Date</code> or <code>POSIXt</code>.</p>
</div>
<div class="section level4">
<h4 id="the-plotsvline_day_numbers-field">The <code>plots/vline_day_numbers</code> field<a class="anchor" aria-label="anchor" href="#the-plotsvline_day_numbers-field"></a>
</h4>
<p>The <code>vline_day_numbers</code> field requires a vector of integers, representing CDISC (non-zero) Study Days. It places vertical dashed lines on the positions corresponding to those days.</p>
</div>
<div class="section level4">
<h4 id="the-plotspalette-field">The <code>plots/palette</code> field<a class="anchor" aria-label="anchor" href="#the-plotspalette-field"></a>
</h4>
<p>The <code>palette</code> field requires a named list of colors. If a name on this list matches the text on a plot element, the associated color will be applied to that element. This mapping takes precedence over the built-in palette. It contains either an HTML (#xxxxxx) or an R color. As an example, if the desired color for an element tagged “Relevant” is yellow and for another tagged “Irrelevant” is gray, this would be the appropriate palette definition:</p>
<pre><code><span><span class="va">palette</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Relevant"</span> <span class="op">=</span> <span class="st">"yellow"</span>, <span class="st">"Irrelevant"</span> <span class="op">=</span> <span class="st">"gray"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
<div class="section level2">
<h2 id="complete-sample-configuration">Complete sample configuration<a class="anchor" aria-label="anchor" href="#complete-sample-configuration"></a>
</h2>
<p>As promised, here’s the configuration resulting from aggregating all the previous steps:</p>
<pre><code><span><span class="fu">dv.papo</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_patient_profile.html">mod_patient_profile</a></span><span class="op">(</span></span>
<span>  module_id <span class="op">=</span> <span class="st">"papo"</span>,</span>
<span>  subject_level_dataset_name <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>  subjid_var <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>  summary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SUBJID"</span>, <span class="st">"SITEID"</span>, <span class="st">"ARM"</span>, <span class="st">"TRTSDT"</span>, <span class="st">"TRTEDT"</span>, <span class="st">"AGE"</span>, <span class="st">"RACE"</span>, <span class="st">"SEX"</span>, <span class="st">"BMIBL"</span><span class="op">)</span>,</span>
<span>    column_count <span class="op">=</span> <span class="fl">3L</span></span>
<span>  <span class="op">)</span>,</span>
<span>  listings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Concomitant Medication"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      dataset <span class="op">=</span> <span class="st">"cm"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"Adverse Events"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      dataset <span class="op">=</span> <span class="st">"adae"</span>,</span>
<span>      default_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASTDT"</span>, <span class="st">"ASTDY"</span>, <span class="st">"AENDT"</span>, <span class="st">"AENDY"</span>, <span class="st">"AEDECOD"</span>, <span class="st">"AESEV"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  plots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    timeline_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      trt_start_date <span class="op">=</span> <span class="st">"TRTSDT"</span>,</span>
<span>      trt_end_date <span class="op">=</span> <span class="st">"TRTEDT"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    range_plots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"Concomitant Medication"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        dataset <span class="op">=</span> <span class="st">"cm"</span>,</span>
<span>        vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          start_date <span class="op">=</span> <span class="st">"CMSTDT"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"CMENDT"</span>,</span>
<span>          decode <span class="op">=</span> <span class="st">"CMDECOD"</span>,</span>
<span>          grading <span class="op">=</span> <span class="st">"CMDECOD"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="st">"Adverse Events"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        dataset <span class="op">=</span> <span class="st">"adae"</span>,</span>
<span>        vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          start_date <span class="op">=</span> <span class="st">"ASTDT"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"AENDT"</span>,</span>
<span>          decode <span class="op">=</span> <span class="st">"AEDECOD"</span>,</span>
<span>          grading <span class="op">=</span> <span class="st">"AESEV"</span>,</span>
<span>          serious_ae <span class="op">=</span> <span class="st">"AESER"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"AE Start Day: "</span> <span class="op">=</span> <span class="st">"ASTDY"</span>,</span>
<span>          <span class="st">"AE End Day: "</span> <span class="op">=</span> <span class="st">"AENDY"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    value_plots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"Lab Values"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        dataset <span class="op">=</span> <span class="st">"lb"</span>,</span>
<span>        vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          analysis_param <span class="op">=</span> <span class="st">"PARAM"</span>,</span>
<span>          analysis_val <span class="op">=</span> <span class="st">"AVAL"</span>,</span>
<span>          analysis_date <span class="op">=</span> <span class="st">"ADT"</span>,</span>
<span>          analysis_indicator <span class="op">=</span> <span class="st">"LBNRIND"</span>,</span>
<span>          range_low_limit <span class="op">=</span> <span class="st">"A1LO"</span>,</span>
<span>          range_high_limit <span class="op">=</span> <span class="st">"A1HI"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        tooltip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        default_analysis_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Albumin (g/L)"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    vline_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Informed Consent Date"</span> <span class="op">=</span> <span class="st">"RFICDT"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Boehringer-Ingelheim Pharma GmbH &amp; Co.KG, Korbinian Matthias, Miguel Lechón, Yuzheng Ou.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
